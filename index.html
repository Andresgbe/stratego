<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Stratego ‚Äî Club de Oficiales</title>

  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="etapa2.css" />
</head>

<body>

  <!-- ===== ENCABEZADO ===== -->
  <header>
    <h1>Club de Oficiales</h1>
    <p>Lobby p√∫blico</p>
  </header>

  <hr>

  <!-- ===== CONTENIDO PRINCIPAL ===== -->
  <main>

    <!-- =========================
         PANTALLA 1: LOBBY (ETAPA I)
         ========================= -->
    <div id="lobby-screen">

      <!-- === SECCI√ìN: OFICIALES CONECTADOS === -->
      <section id="lobby-officers">
        <h2>Oficiales conectados</h2>

        <ul id="officers-list">
          <li>
            <strong>Oficial Rojas</strong>
            <span>‚Äî disponible</span>
            <button data-officer="Oficial Rojas">Retar</button>
          </li>
          <li>
            <strong>Capitana Vega</strong>
            <span>‚Äî en partida</span>
            <button data-officer="Capitana Vega" disabled>Retar</button>
          </li>
          <li>
            <strong>Teniente Silva</strong>
            <span>‚Äî disponible</span>
            <button data-officer="Teniente Silva">Retar</button>
          </li>
        </ul>
      </section>

      <hr>

      <!-- === SECCI√ìN: CONFIGURACI√ìN DEL RETO === -->
      <section id="lobby-challenge">
        <h2>Reto</h2>

        <p>Configura el enfrentamiento antes de enviar el reto.</p>

        <!-- Modalidad -->
        <fieldset>
          <legend>Modalidad</legend>

          <label>
            <input type="radio" name="mode" value="classic" checked>
            Guerra Cl√°sica (40)
          </label>
          <br>
          <label>
            <input type="radio" name="mode" value="quick">
            Duelo R√°pido (10)
          </label>
        </fieldset>

        <br>

        <!-- Protocolo principal -->
        <fieldset>
          <legend>Protocolo principal (lo decide el retador)</legend>

          <label>
            <input type="radio" name="protocol" value="fetch" checked>
            Fetch + SSE
          </label>
          <br>
          <label>
            <input type="radio" name="protocol" value="socket">
            WebSockets
          </label>
        </fieldset>

        <br>

        <p id="challenge-status" aria-live="polite"></p>

        <!-- Acciones -->
        <button id="btn-send-challenge">Enviar reto</button>
        <button id="btn-start-pve">Simular vs Aut√≥mata</button>
      </section>

      <hr>

      <!-- === SECCI√ìN: CHAT GLOBAL === -->
      <section id="lobby-chat">
        <h2>Chat global</h2>

        <div id="lobby-chat-messages">
          <p><strong>Capitana Vega:</strong> ¬øalguien para un duelo r√°pido?</p>
          <p><strong>Teniente Silva:</strong> en un momento</p>
        </div>

        <form id="chat-form">
          <label for="chat-message">Mensaje</label><br>
          <input
            type="text"
            id="chat-message"
            name="chat-message"
            placeholder="Escribe un mensaje"
          >
          <button type="submit">Enviar</button>
        </form>
      </section>

    </div>


    <!-- =========================
         PANTALLA 2: WAR ROOM (ETAPA II)
         ========================= -->
    <section id="war-room" class="hidden">
      <div id="war-room-container">

        <!-- Overlay de espera -->
        <div id="waiting-overlay" class="hidden">
          <div class="spinner"></div>
          <h2>Esperando al General Enemigo...</h2>
          <p>Formaci√≥n bloqueada. La batalla iniciar√° pronto.</p>
        </div>

        <!-- Tablero -->
        <div class="board-section">
          <h2>Cuarto de Guerra: Despliegue</h2>
          <div id="game-board"></div>

          <!-- ‚úÖ Dev Panel Etapa III (m√≠nimo para probar el engine) -->
          <section class="warroom-devpanel">
            <h3>War Room (Dev Panel)</h3>

            <div class="row">
              <label for="actionSelect">Acci√≥n</label>
              <select id="actionSelect"></select>
              <button id="doActionBtn">Ejecutar acci√≥n</button>
            </div>

            <div class="row">
              <button id="nextPhaseBtn">Siguiente fase</button>
            </div>

            <h4>Estado (debug)</h4>
            <pre id="stateDump" class="dump"></pre>
          </section>
        </div>

        <!-- Panel lateral -->
        <aside class="controls-section">

          <div id="inventory-panel">
            <h3>Arsenal Disponible</h3>
            <p style="font-size: 0.8em; color: #aaa;">Arrastra las unidades al tablero</p>
            <div id="pieces-container" class="inventory-grid"></div>
          </div>

          <div class="action-panel">
            <div class="btn-group">
              <button id="btn-randomize" title="Distribuir piezas restantes">‚ö° Aleatorio</button>
              <button id="btn-clear-board" title="Regresar todas las piezas">‚ùå Limpiar</button>
            </div>

            <div class="btn-group">
              <button id="btn-save-strat">üíæ Guardar Grimorio</button>
              <button id="btn-load-strat">üìñ Cargar Grimorio</button>
            </div>

            <button id="btn-ready-war">¬°LISTO PARA LA GUERRA!</button>
            <button id="btn-surrender">üè≥Ô∏è Retirarse (Safe)</button>
            <button id="btn-back-lobby">‚¨Ö Volver al Club</button>
          </div>

          <!-- Chat privado (IDs distintos al lobby para NO chocar) -->
          <div id="private-chat-container">
            <h4>Canal Seguro (Enemigo)</h4>
            <div id="private-chat">
              <div class="chat-messages" id="war-chat-msgs">
                <div class="msg"><em>Sistema: Canal encriptado establecido.</em></div>
              </div>

              <form class="chat-input-area" id="war-chat-form">
                <input id="war-chat-input" type="text" placeholder="Guerra psicol√≥gica aqu√≠..." autocomplete="off">
                <button type="submit">></button>
              </form>
            </div>
          </div>

        </aside>

      </div>
    </section>

  </main>

  <hr>

  <!-- ===== PIE ===== -->
  <footer>
    <p>Stratego ‚Äî Etapa I ¬∑ Club de Oficiales</p>
  </footer>

  <!-- ‚úÖ Scripts: UN SOLO entry point con m√≥dulos -->
  <script type="module" src="./app.js"></script>

</body>
</html>
